/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java Library project to get you started.
 * For more details take a look at the Java Libraries chapter in the Gradle
 * User Manual available at https://docs.gradle.org/6.3/userguide/java_library_plugin.html
 */

buildscript {
    ext {
        
    }
    repositories {
        mavenCentral()
        maven {
            url "https://plugins.gradle.org/m2/"
        }
    }
    dependencies {
        classpath "org.sonarsource.scanner.gradle:sonarqube-gradle-plugin:2.8"
    }
}
plugins {
    id 'java-library'
}

apply plugin: "org.sonarqube"

repositories {
    jcenter()
}

dependencies {

    implementation 'com.google.guava:guava:28.2-jre'
    
    compile "com.google.code.gson:gson:2.8.6"
    compile 'org.springframework.cloud:spring-cloud-function-adapter-aws:2.0.0.RELEASE'
    compile group: 'org.apache.maven.plugins', name: 'maven-shade-plugin', version: '3.2.1'
    compile 'org.slf4j:slf4j-log4j12:1.7.5'
    compile 'com.amazonaws:aws-lambda-java-events:2.2.5'
    compile 'com.amazonaws:aws-lambda-java-core:1.2.0'
    
    implementation 'com.amazonaws:aws-java-sdk-sqs:1.11.835'
	
    testImplementation 'junit:junit:4.12'
    testCompile 'org.mockito:mockito-core:2.21.0]}'
    testCompile 'org.powermock:powermock-api-mockito2:2.0.0'
    testCompile 'org.powermock:powermock-module-junit4:2.0.0'
}

sonarqube {
    properties {
	    property "sonar.language" , "java"
	    property "sonar.exclusions", "**/exception/**, **/model/**, **/constants/**"
	    property "sonar.projectName", "detector-gen-mutante"
		property "sonar.projectKey", "detector-gen-mutante"
	    property "sonar.host.url", "$sonarURL"
	    property "sonar.login", "$sonarToken"
   }
}

task buildZip(type: Zip) {
    from compileJava
    from processResources
    into('lib') {
        from configurations.runtimeClasspath
    }
}

build.dependsOn buildZip
